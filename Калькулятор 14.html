<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <!-- –í–ê–ñ–ù–û: —ç—Ç–æ—Ç —Ç–µ–≥ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –º–æ–¥–µ–ª–∏ –∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 10px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 700px;
            padding: 20px;
            transition: all 0.3s ease;
            margin: 10px 0;
        }

        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        @media (max-width: 600px) {
            body {
                padding: 5px;
                align-items: flex-start;
            }
            
            .container {
                padding: 15px;
                border-radius: 15px;
            }
            
            h1 {
                font-size: 1.6em;
            }
            
            .block {
                padding: 15px;
                margin-bottom: 20px;
            }
            
            .block-title {
                font-size: 1.2em;
                margin-bottom: 15px;
            }
            
            .model-grid {
                display: grid;
                grid-template-columns: repeat(5, 1fr);
                gap: 5px;
            }
            
            .model-input-group label {
                font-size: 0.8em;
                margin-bottom: 3px;
            }
            
            .input-field {
                padding: 8px 10px;
                font-size: 14px;
            }
            
            .operators-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .operator-card {
                padding: 12px;
            }
            
            .operator-card .result-value {
                font-size: 1.2em;
            }
            
            .sum-indicator {
                padding: 10px 12px;
            }
            
            .sum-indicator-value {
                font-size: 1.1em;
            }
            
            .result-value {
                font-size: 1.4em;
            }
            
            .total-sum-box {
                padding: 12px 15px;
            }
            
            .total-sum-value {
                font-size: 1.6em;
            }
            
            .condition-note {
                font-size: 11px;
            }
            
            .reset-btn {
                padding: 18px 15px;
                font-size: 20px;
            }
        }

        /* –î–ª—è –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ (–¥–æ 400px) */
        @media (max-width: 400px) {
            .model-grid {
                grid-template-columns: repeat(5, 1fr);
                gap: 3px;
            }
            
            .model-input-group label {
                font-size: 0.7em;
            }
            
            .input-field {
                padding: 6px 5px;
                font-size: 12px;
            }
            
            .block-title {
                font-size: 1.1em;
            }
            
            .result-label {
                font-size: 0.8em;
            }
            
            .total-sum-label {
                font-size: 0.9em;
            }
            
            .reset-btn {
                padding: 15px 12px;
                font-size: 18px;
            }
        }

        h1 {
            color: #333;
            font-size: 2em;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h1 span {
            font-size: 1.5em;
        }

        .subtitle {
            color: #666;
            margin-bottom: 25px;
            font-size: 0.95em;
            border-left: 3px solid #667eea;
            padding-left: 15px;
        }

        .block {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid #eaeef2;
        }

        .block-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .block-title span {
            font-size: 1.2em;
        }

        /* –°–µ—Ç–∫–∞ –¥–ª—è –ø–æ–ª–µ–π –º–æ–¥–µ–ª–∏ */
        .model-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .model-input-group {
            flex: 1;
        }

        .model-input-group label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
            font-size: 0.9em;
            text-align: center;
        }

        .input-field {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }

        .input-field:focus {
            border-color: #667eea;
        }

        /* –°—Ç–∏–ª—å –¥–ª—è placeholder - –æ–±—ã—á–Ω—ã–π —à—Ä–∏—Ñ—Ç */
        .input-field::placeholder {
            color: #aaa;
            font-style: normal;
            font-size: 0.9em;
        }

        .sum-indicator {
            background: white;
            border: 2px dashed #667eea;
            border-radius: 10px;
            padding: 12px 15px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .sum-indicator-label {
            color: #555;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .sum-indicator-value {
            font-size: 1.3em;
            font-weight: 700;
            color: #667eea;
        }

        .result-box {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
            margin-top: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.02);
        }

        .result-label {
            color: #666;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .result-value {
            font-size: 1.6em;
            font-weight: 700;
            color: #667eea;
        }

        .operators-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 10px;
        }

        .operator-card {
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.03);
            border: 1px solid #eaeef2;
        }

        .operator-card .input-group {
            margin-bottom: 15px;
        }

        .operator-card .input-field {
            background: #f8f9fa;
        }

        .operator-card .result-box {
            background: #f8f9fa;
            border-color: #d0d9e8;
            padding: 12px;
        }

        .operator-card .result-value {
            font-size: 1.4em;
            color: #667eea;
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –∏—Ç–æ–≥–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤ (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –¥–ª—è –º–æ–¥–µ–ª–∏ –∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞) */
        .total-sum-box {
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 15px 20px;
            margin-top: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .total-sum-label {
            color: #333;
            font-size: 1.1em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .total-sum-value {
            font-size: 2em;
            font-weight: 700;
            color: #667eea;
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —Å—É–º–º—ã (–æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –±—ã–ª–æ) */
        .sum-indicator {
            background: white;
            border: 2px dashed #667eea;
            border-radius: 10px;
            padding: 12px 15px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* –£–¥–∞–ª–µ–Ω –±–ª–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏, —Ç–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∞ */

        /* –ù–û–í–´–ô –°–¢–ò–õ–¨ –î–õ–Ø –ö–ù–û–ü–ö–ò - —Ä–∞—Å—Ç—è–Ω—É—Ç–∞—è, —Å –Ω–µ–∂–Ω–æ-–∫—Ä–∞—Å–Ω—ã–º —Ü–≤–µ—Ç–æ–º */
        .reset-btn {
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid #ffb4b4; /* –Ω–µ–∂–Ω–æ-–∫—Ä–∞—Å–Ω–∞—è —Ä–∞–º–∫–∞ */
            color: #d46b6b; /* –Ω–µ–∂–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π —Ç–µ–∫—Å—Ç */
            padding: 20px 20px; /* —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π padding */
            border-radius: 50px; /* –±–æ–ª–µ–µ –æ–∫—Ä—É–≥–ª—ã–µ –∫—Ä–∞—è */
            cursor: pointer;
            font-size: 22px; /* —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç */
            font-weight: 600; /* –ø–æ–ª—É–∂–∏—Ä–Ω—ã–π */
            letter-spacing: 1px; /* –Ω–µ–±–æ–ª—å—à–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª */
            margin-top: 20px;
            width: 100%;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(255, 180, 180, 0.3);
            text-transform: uppercase;
        }

        .reset-btn:hover {
            background: #fff0f0; /* —á—É—Ç—å —Å–≤–µ—Ç–ª–µ–µ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
            border-color: #ff9f9f;
            color: #c45b5b;
            box-shadow: 0 6px 16px rgba(255, 150, 150, 0.4);
            transform: translateY(-2px); /* –ª–µ–≥–∫–∏–π –ø–æ–¥—ä–µ–º */
        }

        .reset-btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 8px rgba(255, 150, 150, 0.3);
        }

        .condition-note {
            font-size: 12px;
            color: #e53e3e;
            margin-top: 5px;
            font-style: normal;
            text-align: right;
        }

        /* –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç—Å—Ç—É–ø –ø–µ—Ä–µ–¥ –∫–Ω–æ–ø–∫–æ–π */
        .button-spacer {
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>
            <span>üßÆ</span> 
            –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–∞—Å—á–µ—Ç–æ–≤
        </h1>
        <div class="subtitle">
            –ó–∞—Ü–µ–Ω–∏, —Å–∫–æ–ª—å–∫–æ –≤—ã –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏üí∏!
        </div>

        <!-- –ë–ª–æ–∫ 1: –ú–æ–¥–µ–ª—å (—Å 5 –ø–æ–ª—è–º–∏ –≤–≤–æ–¥–∞) -->
        <div class="block">
            <div class="block-title">
                <span>üë∏üèº</span> –ú–æ–¥–µ–ª—å
            </div>
            
            <!-- –°–∞–º–∞ —Ñ–æ—Ä–º—É–ª–∞ —Å–∫—Ä—ã—Ç–∞ –æ—Ç –≥–ª–∞–∑ -->
            <div style="display: none;">–§–æ—Ä–º—É–ª–∞: (–°–º–µ–Ω–∞1+–°–º–µ–Ω–∞2+–°–º–µ–Ω–∞3+–°–º–µ–Ω–∞4+–°–º–µ–Ω–∞5) * 65 / 4</div>
            
            <!-- 5 –ø–æ–ª–µ–π –≤–≤–æ–¥–∞ —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –°–º–µ–Ω–∞ 1-5 -->
            <div class="model-grid" id="modelGrid">
                <!-- –ü–æ–ª—è –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>

            <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—É–º–º—ã -->
            <div class="sum-indicator">
                <span class="sum-indicator-label">
                    <span>üìä</span> –°—É–º–º–∞ –≤—Å–µ—Ö —Å–º–µ–Ω:
                </span>
                <span class="sum-indicator-value" id="modelSum">0</span>
            </div>
            
            <!-- –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–¥–µ–ª–∏ –≤ –Ω–æ–≤–æ–º —Å—Ç–∏–ª–µ -->
            <div class="total-sum-box">
                <span class="total-sum-label">
                    <span>üí∞</span> –ò—Ç–æ–≥–æ –∑–∞ –≤—Å–µ —Å–º–µ–Ω—ã:
                </span>
                <span class="total-sum-value" id="modelResult">0.000</span>
            </div>
        </div>

        <!-- –ë–ª–æ–∫ 2: –û–ø–µ—Ä–∞—Ç–æ—Ä -->
        <div class="block">
            <div class="block-title">
                <span>üé•</span> –û–ø–µ—Ä–∞—Ç–æ—Ä
            </div>
            
            <!-- –§–æ—Ä–º—É–ª–∞ —Å–∫—Ä—ã—Ç–∞, –Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã —É—Å–ª–æ–≤–∏—è -->
            <div style="display: none;">
                –£—Å–ª–æ–≤–∏—è –¥–ª—è –∫–∞–∂–¥–æ–π —Å–º–µ–Ω—ã:
                - –µ—Å–ª–∏ –ø–æ–ª–µ –ø—É—Å—Ç–æ–µ ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç = 0
                - –µ—Å–ª–∏ X < 299.99 ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç = 2000
                - –µ—Å–ª–∏ X > 999.99 ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç = X * 65 / 4 / 2
                - –∏–Ω–∞—á–µ ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç = X * 65 / 4 - 60%
            </div>
            
            <div class="operators-grid" id="operatorsContainer">
                <!-- –ü—è—Ç—å –∫–∞—Ä—Ç–æ—á–µ–∫ –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>

            <!-- –°—É–º–º–∞ –≤—Å–µ—Ö —Å–º–µ–Ω (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –º–æ–¥–µ–ª–∏) -->
            <div class="sum-indicator">
                <span class="sum-indicator-label">
                    <span>üìä</span> –°—É–º–º–∞ –≤—Å–µ—Ö —Å–º–µ–Ω:
                </span>
                <span class="sum-indicator-value" id="operatorsSum">0</span>
            </div>

            <!-- –ò—Ç–æ–≥ –∑–∞ –≤—Å–µ —Å–º–µ–Ω—ã -->
            <div class="total-sum-box">
                <span class="total-sum-label">
                    <span>üí∞</span> –ò—Ç–æ–≥–æ –∑–∞ –≤—Å–µ —Å–º–µ–Ω—ã:
                </span>
                <span class="total-sum-value" id="totalOperatorsSum">0.000</span>
            </div>

            <!-- –ü–æ—è—Å–Ω–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π -->
            <div class="condition-note">
                * –µ—Å–ª–∏ –º–µ–Ω—å—à–µ 299.99 ‚Üí 2000<br>
                * –µ—Å–ª–∏ –±–æ–ª—å—à–µ 999.99 ‚Üí X*65/4/2
            </div>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ - —Ä–∞—Å—Ç—è–Ω—É—Ç–∞—è –∏ —Å –Ω–µ–∂–Ω–æ-–∫—Ä–∞—Å–Ω—ã–º —Ü–≤–µ—Ç–æ–º -->
        <button class="reset-btn" id="resetBtn">üîÑ –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –ø–æ–ª—è</button>
    </div>

    <script>
        // --- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ---
        const MODEL_FORMULA = (x) => (x * 65) / 4;
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ —Å —Ç—Ä–µ–º—è —É—Å–ª–æ–≤–∏—è–º–∏
        const OPERATOR_FORMULA = (x, isEmpty) => {
            // –£—Å–ª–æ–≤–∏–µ 1: –ï—Å–ª–∏ –ø–æ–ª–µ –ø—É—Å—Ç–æ–µ, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º 0
            if (isEmpty) {
                return 0;
            }
            
            // –£—Å–ª–æ–≤–∏–µ 2: –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –º–µ–Ω—å—à–µ 299.99, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º 2000
            if (x < 299.99) {
                return 2000;
            }
            
            // –£—Å–ª–æ–≤–∏–µ 3: –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –±–æ–ª—å—à–µ 999.99, –ø—Ä–∏–º–µ–Ω—è–µ–º —Ñ–æ—Ä–º—É–ª—É X*65/4/2
            if (x > 999.99) {
                return (x * 65) / 4 / 2;
            }
            
            // –£—Å–ª–æ–≤–∏–µ 4: –î–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ (–æ—Ç 299.99 –¥–æ 999.99)
            // –ø—Ä–∏–º–µ–Ω—è–µ–º –æ–±—ã—á–Ω—É—é —Ñ–æ—Ä–º—É–ª—É X*65/4-60%
            const base = (x * 65) / 4;
            return base * 0.4; // —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ base - 60% = base * 0.4
        };

        // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
        const OPERATOR_COUNT = 5;
        // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ–π –≤ –º–æ–¥–µ–ª–∏
        const MODEL_FIELDS_COUNT = 5;

        // --- –≠–ª–µ–º–µ–Ω—Ç—ã DOM ---
        const modelGrid = document.getElementById('modelGrid');
        const modelSum = document.getElementById('modelSum');
        const modelResult = document.getElementById('modelResult');
        const operatorsContainer = document.getElementById('operatorsContainer');
        const operatorsSum = document.getElementById('operatorsSum');
        const totalOperatorsSum = document.getElementById('totalOperatorsSum');
        const resetBtn = document.getElementById('resetBtn');

        // –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è —Å—Å—ã–ª–æ–∫
        const modelInputs = []; // –º–∞—Å—Å–∏–≤ –¥–ª—è 5 –ø–æ–ª–µ–π –º–æ–¥–µ–ª–∏
        const operatorInputs = [];
        const operatorResults = [];

        // –§–ª–∞–≥ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
        let isSyncing = false;

        // --- –§—É–Ω–∫—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (3 –∑–Ω–∞–∫–∞) ---
        function formatNumber(value) {
            if (isNaN(value) || value === null || value === '') return '0.000';
            return value.toFixed(3);
        }

        // --- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ (—Å—É–º–º–∞ 5 –ø–æ–ª–µ–π -> —Ä–µ–∑—É–ª—å—Ç–∞—Ç) ---
        function updateModel() {
            if (isSyncing) return;
            
            // –°—á–∏—Ç–∞–µ–º —Å—É–º–º—É –≤—Å–µ—Ö –ø–æ–ª–µ–π –º–æ–¥–µ–ª–∏
            let sum = 0;
            modelInputs.forEach(input => {
                const val = parseFloat(input.value);
                if (!isNaN(val)) {
                    sum += val;
                }
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—É–º–º—ã
            modelSum.textContent = sum.toFixed(3);
            
            // –í—ã—á–∏—Å–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ —Ñ–æ—Ä–º—É–ª–µ
            const result = MODEL_FORMULA(sum);
            modelResult.textContent = formatNumber(result);
        }

        // --- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ –º–æ–¥–µ–ª–∏ –≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã ---
        function syncModelToOperators() {
            isSyncing = true;
            
            // –ö–æ–ø–∏—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –ø–æ–ª–µ–π –º–æ–¥–µ–ª–∏ –≤ –ø–æ–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
            for (let i = 0; i < MODEL_FIELDS_COUNT; i++) {
                if (operatorInputs[i] && modelInputs[i]) {
                    operatorInputs[i].value = modelInputs[i].value;
                }
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
            for (let i = 0; i < OPERATOR_COUNT; i++) {
                updateOperator(i, true); // true = –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
            }
            
            isSyncing = false;
        }

        // --- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É–º–º—ã –≤—Å–µ—Ö —Å–º–µ–Ω –≤ –±–ª–æ–∫–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä ---
        function updateOperatorsSum() {
            let sum = 0;
            operatorInputs.forEach(input => {
                const val = parseFloat(input.value);
                if (!isNaN(val)) {
                    sum += val;
                }
            });
            operatorsSum.textContent = sum.toFixed(3);
        }

        // --- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤–æ–π —Å—É–º–º—ã –≤—Å–µ—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ ---
        function updateTotalSum() {
            let total = 0;
            operatorResults.forEach(resultSpan => {
                const value = parseFloat(resultSpan.textContent);
                if (!isNaN(value)) {
                    total += value;
                }
            });
            totalOperatorsSum.textContent = formatNumber(total);
        }

        // --- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ (—Å —Ç—Ä–µ–º—è —É—Å–ª–æ–≤–∏—è–º–∏) ---
        function updateOperator(index, skipSync = false) {
            const input = operatorInputs[index];
            const resultSpan = operatorResults[index];
            
            if (input && resultSpan) {
                const isEmpty = input.value === '';
                const x = parseFloat(input.value);
                const validX = isNaN(x) ? 0 : x;
                const result = OPERATOR_FORMULA(validX, isEmpty);
                resultSpan.textContent = formatNumber(result);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—É–º–º—ã
                updateOperatorsSum();
                updateTotalSum();
            }
        }

        // --- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ ---
        function updateAllOperators() {
            for (let i = 0; i < OPERATOR_COUNT; i++) {
                updateOperator(i);
            }
            updateOperatorsSum();
            updateTotalSum();
        }

        // --- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–µ–π –º–æ–¥–µ–ª–∏ (5 —à—Ç—É–∫) ---
        function createModelFields() {
            modelGrid.innerHTML = '';
            modelInputs.length = 0;

            for (let i = 1; i <= MODEL_FIELDS_COUNT; i++) {
                const inputGroup = document.createElement('div');
                inputGroup.className = 'model-input-group';
                
                const inputId = `modelInput${i}`;
                
                inputGroup.innerHTML = `
                    <label for="${inputId}">–°–º–µ–Ω–∞ ${i}</label>
                    <input type="number" id="${inputId}" class="input-field" placeholder="0" step="any">
                `;
                
                modelGrid.appendChild(inputGroup);
                
                const inputEl = document.getElementById(inputId);
                modelInputs.push(inputEl);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
                inputEl.addEventListener('input', () => {
                    updateModel();
                    syncModelToOperators();
                });
            }
        }

        // --- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ (–Ω–∞—á–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è = –ø—É—Å—Ç–æ) ---
        function createOperators() {
            operatorsContainer.innerHTML = '';
            
            operatorInputs.length = 0;
            operatorResults.length = 0;

            for (let i = 1; i <= OPERATOR_COUNT; i++) {
                const card = document.createElement('div');
                card.className = 'operator-card';
                
                const inputId = `operator${i}Input`;
                const resultId = `operator${i}Result`;
                
                card.innerHTML = `
                    <div class="input-group">
                        <label for="${inputId}">–°–º–µ–Ω–∞ ‚Ññ${i}</label>
                        <input type="number" id="${inputId}" class="input-field" placeholder="0" step="any">
                    </div>
                    <div class="result-box">
                        <span class="result-label">–†–µ–∑—É–ª—å—Ç–∞—Ç ${i}:</span>
                        <span class="result-value" id="${resultId}">0.000</span>
                    </div>
                `;
                
                operatorsContainer.appendChild(card);
                
                const inputEl = document.getElementById(inputId);
                const resultEl = document.getElementById(resultId);
                
                operatorInputs.push(inputEl);
                operatorResults.push(resultEl);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞—Ö
                inputEl.addEventListener('input', (function(idx) {
                    return function() {
                        if (!isSyncing) {
                            updateOperator(idx);
                        }
                    };
                })(i - 1));
            }
            
            // –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –≤—Å–µ –ø–æ–ª—è –ø—É—Å—Ç—ã–µ, —Å—É–º–º—ã = 0
            updateOperatorsSum();
            updateTotalSum();
        }

        // --- –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –ø–æ–ª–µ–π ---
        function resetAllToDefault() {
            isSyncing = true;
            
            // –û—á–∏—â–∞–µ–º –ø–æ–ª—è –º–æ–¥–µ–ª–∏
            modelInputs.forEach(input => {
                input.value = '';
            });
            
            // –û—á–∏—â–∞–µ–º –ø–æ–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
            operatorInputs.forEach(input => {
                input.value = '';
            });
            
            isSyncing = false;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (–±—É–¥—É—Ç 0.000)
            updateModel();
            updateAllOperators();
        }

        // --- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ---
        function initApp() {
            // –°–æ–∑–¥–∞–µ–º –ø–æ–ª—è –º–æ–¥–µ–ª–∏ (5 —à—Ç—É–∫)
            createModelFields();
            
            // –°–æ–∑–¥–∞–µ–º –ø–æ–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
            createOperators();
            
            // –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞
            resetBtn.addEventListener('click', resetAllToDefault);
            
            // –ù–∞—á–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã = 0.000)
            updateModel();
            updateAllOperators();
            
            console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ. –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ —É–≤–µ–ª–∏—á–µ–Ω–∞ –∏ –∏–º–µ–µ—Ç –Ω–µ–∂–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç');
        }

        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>